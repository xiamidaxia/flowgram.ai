"use strict";(self.webpackChunk_flowgram_ai_docs=self.webpackChunk_flowgram_ai_docs||[]).push([["399067"],{769379:function(e,t,n){n.d(t,{XPE:()=>i.XPE,SyX:()=>i.SyX,M1y:()=>i.M1y,LzJ:()=>i.LzJ,Vro:()=>eN,Hxo:()=>i.Hxo,tsW:()=>i.tsW,qRT:()=>i.qRT,JAk:()=>i.JAk,kDE:()=>i.kDE,eGM:()=>i.eGM,sX$:()=>eS,Dcz:()=>i.Dcz,R6T:()=>i.R6T,HoL:()=>i.HoL,GAy:()=>i.GAy,rVg:()=>i.rVg,oC4:()=>i.oC4,LPb:()=>i.LPb,XQj:()=>i.XQj,C$T:()=>i.C$T,PVB:()=>ev,CMu:()=>i.CMu,_J4:()=>i._J4,G2Z:()=>i.G2Z,JTr:()=>i.JTr,gNE:()=>i.gNE,QUv:()=>i.QUv,gNt:()=>i.gNt,g5f:()=>eb,erw:()=>eP,OTb:()=>i.OTb,cmt:()=>w}),n("543789");var o,i=n("832920"),r=n("461932"),a=n("775832"),l=n("215206"),d=n("213153"),s=n("177783"),u=Object.defineProperty,p=Object.getOwnPropertyDescriptor,c={type:l.Sy.END,meta:{draggable:!1,isNodeEnd:!0,selectable:!1,copyDisable:!0},getLines:()=>[],getLabels:()=>[]},g={type:l.OT.DYNAMIC_SPLIT,meta:{hidden:!0,inlineSpacingAfter:e=>e.collapsed&&e.entity.collapsedChildren.length>1?21:0,spacing:e=>{let t=(0,l.yI)(e.entity,l.cc.NODE_SPACING);return 1===e.children.length?t:t/2}},getLabels:e=>e.isNodeEnd?[]:[{type:l.nx.ADDER_LABEL,offset:e.transform.outputPoint}],onCreate:(e,t)=>e.document.addInlineBlocks(e,t.blocks||[]),getInputPoint:e=>e.firstChild?.inputPoint||e.defaultInputPoint,getOutputPoint(e,t){let n=l.XP.isVertical(t),o=1===e.children.length,i=e.lastChild?.outputPoint,r=(0,l.yI)(e.entity,l.cc.NODE_SPACING);return n?{x:i?i.x:e.bounds.center.x,y:e.bounds.bottom+(o?r/2:0)}:{x:e.bounds.right+(o?r/2:0),y:i?i.y:e.bounds.center.y}},addChild(e,t,n={}){let{index:o}=n,i=e.document,r=`$inlineBlocks$${e.id}`,a=i.getNode(r);return!a&&(a=i.addNode({id:r,type:"inlineBlocks",originParent:e,parent:e})),i.addBlock(e,t,void 0,void 0,o)}},h={extend:l.OT.DYNAMIC_SPLIT,type:l.OT.STATIC_SPLIT,extendChildRegistries:[{type:l.Sy.INLINE_BLOCKS,getLabels:()=>[]}]},y={type:l.Sy.BLOCK,meta:{spacing:l.Lu.NULL,inlineSpacingAfter:l.Lu.INLINE_BLOCK_PADDING_BOTTOM,hidden:!0},getLines(e){let t=e.transform,{isVertical:n}=e.entity,o=[{type:l.IG.DIVERGE_LINE,from:t.parent.inputPoint,to:t.inputPoint,side:l.VH.NORMAL_BRANCH}];if(t&&t.entity.isInlineBlock&&e.renderData.draggable){if(n){let e=t.firstChild?.bounds?.right||0,n=t.next?.firstChild?.bounds?.left||0,i=t.inputPoint.y;t?.next&&o.push({type:l.IG.DRAGGING_LINE,from:t.parent.inputPoint,to:{x:(e+n)/2,y:i},side:l.VH.NORMAL_BRANCH})}else{let e=t.firstChild?.bounds?.bottom||0,n=t.next?.firstChild?.bounds?.top||0,i=t.inputPoint.x;t?.next&&o.push({type:l.IG.DRAGGING_LINE,from:t.parent.inputPoint,to:{x:i,y:(e+n)/2},side:l.VH.NORMAL_BRANCH})}}return!e.isNodeEnd&&o.push({type:l.IG.MERGE_LINE,from:t.outputPoint,to:t.parent.outputPoint,side:l.VH.NORMAL_BRANCH}),o},getInputPoint(e){let t=e.firstChild;return t?t.inputPoint:e.defaultInputPoint},getOutputPoint(e,t){let n=l.XP.isVertical(t),o=e.lastChild;return n?{x:o?o.outputPoint.x:e.bounds.bottomCenter.x,y:e.bounds.bottom}:{x:e.bounds.right,y:o?o.outputPoint.y:e.bounds.rightCenter.y}},getLabels(e){let t=e.transform,{isVertical:n}=e.entity,o=[];if(t&&t.entity.isInlineBlock&&e.renderData.draggable){if(n){let e=t.firstChild?.bounds?.right||0,n=t.next?.firstChild?.bounds?.left||0,i=t.inputPoint.y;t?.next&&o.push({offset:{x:(e+n)/2,y:i},type:l.nx.BRANCH_DRAGGING_LABEL,width:n-e,props:{side:l.VH.NORMAL_BRANCH}})}else{let e=t.firstChild?.bounds?.bottom||0,n=t.next?.firstChild?.bounds?.top||0,i=t.inputPoint.x;t?.next&&o.push({offset:{x:i,y:(e+n)/2},type:l.nx.BRANCH_DRAGGING_LABEL,width:n-e,props:{side:l.VH.NORMAL_BRANCH}})}}return[...o]},addChild(e,t,n={}){let{index:o}=n;return e.document.addNode({...t,...n,parent:e,index:"number"==typeof o?o+1:void 0})}},f={type:l.Sy.INLINE_BLOCKS,meta:{hidden:!0,spacing:e=>(0,l.yI)(e.entity,l.cc.NODE_SPACING),isInlineBlocks:!0,inlineSpacingPre:l.Lu.INLINE_BLOCKS_PADDING_TOP,inlineSpacingAfter:e=>(0,l.yI)(e.entity,l.cc.INLINE_BLOCKS_PADDING_BOTTOM)},getChildDelta(e,t){let n=l.XP.isVertical(t),o=e.entity.pre?.getData(l.eG);if(o){let{localBounds:t}=o;if(n){let n=o.size.width+o.originDeltaX,i=Math.max(e.parent.minInlineBlockSpacing-n,l.Lu.MARGIN_RIGHT-e.originDeltaX);return{x:t.right+i,y:0}}{let n=o.size.height+o.originDeltaY,i=Math.max(e.parent.minInlineBlockSpacing-n,l.Lu.MARGIN_RIGHT-e.originDeltaY);return{x:0,y:t.bottom+i}}}return{x:0,y:0}},getDelta(e,t){let n=l.XP.isVertical(t),{pre:o,collapsed:i}=e;if(i)return{x:0,y:0};if(n){let t=o.localBounds.center.x,n=e.firstChild?.transform.position.x||0,i=e.lastChild?.transform.position.x||0;return{x:t-(i-n)/2,y:0}}let r=o.localBounds.center.y,a=e.firstChild?.transform.position.y||0,d=e.lastChild?.transform.position.y||0;return{x:0,y:r-(d-a)/2}},getLabels:e=>(function(e){let{isVertical:t}=e.entity,n=e.transform;return n.collapsed?[{type:l.nx.COLLAPSE_LABEL,offset:s.E9.move(n.inputPoint,t?{y:10}:{x:10}),props:{activateNode:e.entity.pre}}]:[{type:l.nx.CUSTOM_LABEL,renderKey:a.kD.BRANCH_ADDER,offset:s.E9.move(n.inputPoint,t?{y:10}:{x:10}),props:{activated:e.entity.getData(l.Lz).activated,transform:n,node:n.originParent?.entity}}]})(e),getLines:()=>[],getInputPoint:(e,t)=>l.XP.isVertical(t)?{x:e.pre?.outputPoint.x||0,y:e.bounds.top}:{x:e.bounds.left,y:e.pre?.outputPoint.y||0},getOutputPoint(e,t){let n=l.XP.isVertical(t);return e.collapsed?e.inputPoint:n?{x:e.pre?.outputPoint.x||0,y:e.bounds.bottom}:{x:e.bounds.right,y:e.pre?.outputPoint.y||0}}},m={type:l.Sy.BLOCK_ICON,meta:{spacing:20,size:{width:250,height:84}},getLabels(e){let t=e.transform,{isVertical:n}=e.entity;if(e.entity.parent.collapsedChildren.length<=1)return[];let o=(0,l.yI)(e.entity,l.T4.COLLAPSED_SPACING);return[{type:l.nx.COLLAPSE_LABEL,offset:s.E9.move(t.outputPoint,n?{y:o}:{x:o}),props:{collapseNode:e.entity.parent,activateNode:e.entity}}]}},C={type:l.Sy.BLOCK_ORDER_ICON,meta:{spacing:40},getLabels(e){let t=e.transform,{isVertical:n}=e.entity,o=t.outputPoint,i=t.next,r=t.parent;if(e.entity.parent.collapsedChildren.length<=1)return[{offset:r?.outputPoint,type:l.nx.ADDER_LABEL}];let a=(0,l.yI)(e.entity,l.T4.COLLAPSED_SPACING);return[{offset:i?s.E9.getMiddlePoint(o,i.inputPoint):s.E9.move(o,n?{y:a}:{x:a}),type:l.nx.COLLAPSE_ADDER_LABEL,props:{activateNode:e.entity,collapseNode:e.entity.parent}}]}},N={type:l.Sy.START,meta:{isStart:!0,draggable:!1,selectable:!1,deleteDisable:!0,copyDisable:!0,addDisable:!0}},L={extend:l.Sy.BLOCK,type:"catchBlock",meta:{hidden:!0,spacing:l.Lu.NULL},getLines(e){let t;let{transform:n}=e,{isVertical:o}=e.entity,i=n.parent,{inputPoint:r,outputPoint:a}=n;t=o?{x:i.inputPoint.x,y:i.inputPoint.y-20}:{x:i.inputPoint.x-20,y:i.inputPoint.y};let d=[{type:l.IG.DIVERGE_LINE,from:t,to:r}];if(!e.isNodeEnd){let e;e=o?{x:i.outputPoint.x,y:i.bounds.bottom}:{x:i.bounds.right,y:i.outputPoint.y},d.push({type:l.IG.MERGE_LINE,from:a,to:e})}return d},getLabels:()=>[]},I={extend:l.Sy.INLINE_BLOCKS,type:"catchInlineBlocks",meta:{spacing:l.Lu.NULL,inlineSpacingPre:l.Lu.NULL},getDelta(){},getLines(e){let{transform:t}=e,n=t.parent,o=[{type:l.IG.DIVERGE_LINE,from:n.pre.outputPoint,to:t.inputPoint}];return!t.entity.isNodeEnd&&o.push({type:l.IG.MERGE_LINE,from:t.outputPoint,to:n.outputPoint}),o},getOriginDeltaX(e){let{firstChild:t}=e;return t?t.originDeltaX:0},getLabels(e){let{inputPoint:t}=e.transform,{isVertical:n}=e.entity,o=e.transform,i={x:n?t.x:t.x-20,y:n?t.y-20:t.y};return o.collapsed?[]:[{type:l.nx.CUSTOM_LABEL,renderKey:a.kD.BRANCH_ADDER,offset:i,props:{activated:e.entity.getData(l.Lz).activated,transform:o,node:o.originParent?.entity}}]},getInputPoint(e,t){let n=l.XP.isVertical(t),o=e.firstChild;return o?o.inputPoint:n?e.bounds.topCenter:e.bounds.rightCenter},getOutputPoint(e,t){let n=l.XP.isVertical(t);if(e.collapsed)return e.inputPoint;let o=e.firstChild;return o?n?{x:o.outputPoint?.x,y:e.bounds.bottom}:{x:e.bounds.right,y:o.outputPoint?.y}:n?e.bounds.bottomCenter:e.bounds.rightCenter}},E={extend:l.Sy.INLINE_BLOCKS,type:"mainInlineBlocks",meta:{inlineSpacingPre:20,inlineSpacingAfter:40},getLines(e){let{transform:t}=e,n=t.firstChild;return[{type:l.IG.STRAIGHT_LINE,from:n.outputPoint,to:t.originParent.outputPoint}]},getLabels(e){let{transform:t}=e,{isVertical:n}=e.entity,o=t.children[1],i=n?(t.parent.outputPoint.x+o.inputPoint.x)/2:t.inputPoint.x-54,r=n?t.inputPoint.y-54:(t.parent.outputPoint.y+o.inputPoint.y)/2;return[{type:l.nx.TEXT_LABEL,renderKey:a.oC.TRY_START_TEXT,offset:{x:n?t.inputPoint.x:t.inputPoint.x+-20,y:n?t.inputPoint.y+-20:t.inputPoint.y}},{type:l.nx.TEXT_LABEL,renderKey:a.oC.TRY_END_TEXT,offset:{x:n?t.inputPoint.x:t.originParent.outputPoint.x+-20,y:n?t.originParent.outputPoint.y+-20:t.inputPoint.y}},{type:l.nx.CUSTOM_LABEL,renderKey:a.kD.TRY_CATCH_COLLAPSE,offset:{x:i,y:r},props:{node:t.lastChild?.entity}}]},getInputPoint:e=>e.firstChild.inputPoint,getOutputPoint(e,t){let n=e.firstChild;return l.XP.isVertical(t)?{x:n.outputPoint.x,y:e.bounds.bottom+20}:{x:e.bounds.right+20,y:n.outputPoint.y}},getDelta(){},getChildDelta(e,t){let n=e.entity.pre?.getData(l.eG),o=l.XP.isVertical(t);if(n){let{localBounds:t}=n,i=0;return i=o?Math.max(e.parent.minInlineBlockSpacing,-e.originDeltaX+l.Lu.MARGIN_RIGHT):Math.max(e.parent.minInlineBlockSpacing,-e.originDeltaY+l.Lu.MARGIN_RIGHT),{x:o?t.right+i:0,y:o?0:t.bottom+i}}return{x:0,y:0}}},b={extend:l.Sy.BLOCK,type:"tryBlock",meta:{hidden:!0,spacing:l.Lu.NULL},getLines:()=>[],getLabels:()=>[]},v={extend:l.Sy.EMPTY,type:"trySlot"},x={type:"tryCatch",meta:{hidden:!0,inlineSpacingAfter:0},onCreate(e,t){let{document:n}=e,[o,...i]=t.blocks||[],r=[],a=n.addNode({id:`$tryCatchIcon$${e.id}`,type:l.Sy.BLOCK_ICON,originParent:e,parent:e}),d=n.addNode({id:`$mainInlineBlocks$${e.id}`,type:"mainInlineBlocks",originParent:e,parent:e}),s=n.addNode({id:`$tryBlock$${o.id}`,type:"tryBlock",originParent:e,parent:d}),u=n.addNode({id:o.id,type:"trySlot",originParent:e,parent:s}),p=n.addNode({id:`$catchInlineBlocks$${e.id}`,type:"catchInlineBlocks",originParent:e,parent:d});return r.push(a,d,s,u,p),i.forEach(t=>{e.document.addBlock(e,t,r)}),r},onBlockChildCreate(e,t,n){let o=e.document.getNode(`$catchInlineBlocks$${e.id}`),i=e.document.addNode({id:t.id,type:"catchBlock",originParent:e,parent:o}),r=e.document.addNode({id:`$blockOrderIcon$${t.id}`,type:l.Sy.BLOCK_ORDER_ICON,originParent:e,parent:i});return t.blocks&&e.document.addBlocksAsChildren(i,t.blocks||[],n),n?.push(i,r),i},getInputPoint:e=>e.firstChild.inputPoint,getOutputPoint(e,t){let n=l.XP.isVertical(t),o=e.firstChild;return n?{x:o.inputPoint.x,y:e.bounds.bottom}:{x:e.bounds.right,y:o.inputPoint.y}},extendChildRegistries:[{type:l.Sy.BLOCK_ICON,meta:{spacing:54},getLabels:()=>[]},E,I,b,L,v]},P={SPACING:16,COLLAPSE_INLINE_SPACING_BOTTOM:60,[l.cc.INLINE_SPACING_BOTTOM]:48,MIN_INLINE_BLOCK_SPACING:280,HORIZONTAL_MIN_INLINE_BLOCK_SPACING:180,LEFT_EMPTY_BLOCK_WIDTH:80,EMPTY_BRANCH_SPACING:20,LOOP_BLOCK_ICON_SPACING:13,[l.cc.INLINE_BLOCKS_INLINE_SPACING_BOTTOM]:23,INLINE_BLOCKS_INLINE_SPACING_TOP:30},S={type:"loopLeftEmptyBlock",meta:{inlineSpacingAfter:0,spacing:0,size:{width:P.LEFT_EMPTY_BLOCK_WIDTH,height:0}},onAfterUpdateLocalTransform(e){e.entity.isVertical?e.data.size={width:P.LEFT_EMPTY_BLOCK_WIDTH,height:0}:e.data.size={width:0,height:P.LEFT_EMPTY_BLOCK_WIDTH},e.transform.update({size:e.data.size})},getLines:()=>[],getLabels:()=>[]},D={...y,type:"loopRightEmptyBlock",meta:{...y.meta,inlineSpacingAfter:0}},_={type:"loopEmptyBranch",meta:{inlineSpacingAfter:0,spacing:P.EMPTY_BRANCH_SPACING,size:{width:100,height:0}},getLabels(e){let{isVertical:t}=e.entity,n=e.transform;return t?[{type:l.nx.ADDER_LABEL,offset:{x:n.inputPoint.x,y:n.bounds.center.y+8}}]:[{type:l.nx.ADDER_LABEL,offset:{x:n.bounds.center.x+8,y:n.inputPoint.y}}]},onAfterUpdateLocalTransform(e){e.entity.isVertical?e.data.size={width:100,height:0}:e.data.size={width:0,height:100},e.transform.update({size:e.data.size})}},O={type:l.Sy.INLINE_BLOCKS,meta:{inlineSpacingPre:e=>(0,l.yI)(e.entity,l.cc.INLINE_BLOCKS_INLINE_SPACING_TOP,P.INLINE_BLOCKS_INLINE_SPACING_TOP),inlineSpacingAfter:e=>(0,l.yI)(e.entity,l.cc.INLINE_BLOCKS_INLINE_SPACING_BOTTOM,P.INLINE_BLOCKS_INLINE_SPACING_BOTTOM),minInlineBlockSpacing:e=>e.entity.isVertical?P.MIN_INLINE_BLOCK_SPACING:P.HORIZONTAL_MIN_INLINE_BLOCK_SPACING},getLines(e){let t=e.transform,n=t.parent,{isVertical:o}=e.entity,i=[{type:l.IG.STRAIGHT_LINE,from:t.outputPoint,to:n.outputPoint}];if(t.collapsed)return i;let[r]=t.children;return[...i,{type:l.IG.ROUNDED_LINE,from:t.outputPoint,to:r.outputPoint,vertices:[o?{x:r.inputPoint.x,y:t.bounds.bottom}:{x:t.bounds.right,y:r.inputPoint.y}]},{type:l.IG.ROUNDED_LINE,from:r.outputPoint,to:s.E9.move(t.inputPoint,o?{x:-12,y:10}:{x:10,y:-12}),vertices:[o?{x:r.inputPoint.x,y:t.bounds.top+10}:{x:t.bounds.left+10,y:r.inputPoint.y}],arrow:!0}]},getLabels(e){let t=e.transform,{isVertical:n}=e.entity,o=[];if(t.collapsed)return o;let i=t.children[0],r=t.children[1];return e.entity.originParent?.id.startsWith("while_")?o.push({type:l.nx.TEXT_LABEL,renderKey:a.oC.LOOP_WHILE_TEXT,rotate:n?"":"-90deg",offset:n?{x:(t.inputPoint.x+r.inputPoint.x)/2,y:t.inputPoint.y+10}:{x:t.inputPoint.x+10,y:(t.inputPoint.y+r.inputPoint.y)/2}}):o.push({type:l.nx.TEXT_LABEL,renderKey:a.oC.LOOP_TRAVERSE_TEXT,offset:n?{x:i.inputPoint.x,y:t.bounds.center.y+5}:{x:t.bounds.center.x+5,y:i.inputPoint.y}}),o}},B={type:"loop",meta:{hidden:!0,inlineSpacingAfter:e=>e.collapsed?P.COLLAPSE_INLINE_SPACING_BOTTOM:(0,l.yI)(e.entity,l.cc.INLINE_SPACING_BOTTOM,P.INLINE_SPACING_BOTTOM),spacing:P.SPACING},onCreate(e,t){let{document:n}=e,o=t.blocks||[],i=n.addNode({id:`$blockIcon$${e.id}`,type:l.Sy.BLOCK_ICON,originParent:e,parent:e}),r=n.addNode({id:`$inlineBlocks$${e.id}`,hidden:!0,type:l.Sy.INLINE_BLOCKS,originParent:e,parent:e}),a=n.addNode({id:`$loopLeftEmpty$${e.id}`,hidden:!0,type:"loopLeftEmptyBlock",originParent:e,parent:r}),d=n.addNode({id:`$block$${e.id}`,hidden:!0,type:l.Sy.BLOCK,originParent:e,parent:r}),s=n.addNode({id:`$loopRightEmpty$${e.id}`,hidden:!0,type:"loopEmptyBranch",originParent:e,parent:d}),u=[];return o.forEach(e=>n.addNode({...e,type:e.type,parent:d},u)),[i,a,r,d,s,...u]},getLabels(e){let t=e.transform,{isVertical:n}=e.entity;return[{type:l.nx.TEXT_LABEL,renderKey:a.oC.LOOP_END_TEXT,props:n?void 0:{style:{maxWidth:"20px",lineHeight:"12px",whiteSpace:"pre-wrap"}},offset:s.E9.move(t.outputPoint,n?{y:-26}:{x:-26})},{type:l.nx.ADDER_LABEL,offset:t.outputPoint}]},getInputPoint(e){let{isVertical:t}=e.entity;return t?{x:e.pre?.outputPoint.x||e.firstChild?.outputPoint.x||0,y:e.bounds.top}:{x:e.bounds.left,y:e.pre?.outputPoint.y||e.firstChild?.outputPoint.y||0}},getOutputPoint(e){let{isVertical:t}=e.entity;return t?{x:e.pre?.outputPoint.x||e.firstChild?.outputPoint.x||0,y:e.bounds.bottom}:{x:e.bounds.right,y:e.pre?.outputPoint.y||e.firstChild?.outputPoint.y||0}},extendChildRegistries:[{type:l.Sy.BLOCK_ICON,meta:{spacing:P.LOOP_BLOCK_ICON_SPACING}},S,_,D,O],addChild(e,t,n={}){let{index:o}=n,i=e.document;return i.addNode({...t,...n,parent:i.getNode(`$block$${e.id}`),index:"number"==typeof o?o+1:void 0})}},A={type:l.Sy.ROOT,meta:{spacing:l.Lu.NULL,hidden:!0},getInputPoint:e=>e.firstChild?.inputPoint||e.bounds.topCenter,getOutputPoint:e=>e.firstChild?.outputPoint||e.bounds.bottomCenter},k={type:l.Sy.EMPTY,meta:{spacing:e=>(0,l.yI)(e.entity,l.cc.NODE_SPACING)/2,size:{width:0,height:0},hidden:!0},getLabels:e=>[{offset:e.transform.bounds,type:l.nx.ADDER_LABEL}]},T=class{registerDocument(e){e.registerFlowNodes(A,N,g,h,y,f,m,C,x,c,B,k),e.registerNodeDatas(l.Lz,l.Xr,l.eG)}registerRenderer(e){e.registerLayers(a.V7,a.Em,a.HW,a.Eq,d.wY,a.qq,a.lV)}onReady(){}onDispose(){}};T=((e,t,n,o)=>{for(var i=o?p(t,void 0):t,r,a=e.length-1;a>=0;a--)(r=e[a])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&u(t,n,i),i})([(0,r.b2)()],T);var $=new r.nZ(e=>{(0,s.KV)(e,T,[l.Lw,a.OK,d.qY])}),R=n("908600"),M=(0,d.M1)({onInit(e,t){!1!==t.enable&&e.playground.registerLayer(a.EU,{onDrop:t.onDrop?t.onDrop.bind(null,e):void 0,canDrop:t.canDrop?t.canDrop.bind(null,e):void 0})}});function w(){let e=(0,d.Dc)().getLayer(a.EU);return(0,R.useMemo)(()=>({startDrag:e?e.startDrag.bind(e):e=>{}}),[e])}var G=n("229687"),H=n("362270"),V=n("664881"),F=n("246038"),z=Object.defineProperty,K=Object.getOwnPropertyDescriptor,X=(e,t,n,o)=>{for(var i=o>1?void 0:o?K(t,n):t,r,a=e.length-1;a>=0;a--)(r=e[a])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&z(t,n,i),i},U=class{constructor(){this.nodeToJSON=e=>e.toJSON(),this.getNodeLabelById=e=>e,this.getNodeLabel=e=>e.id,this.getBlockLabel=e=>e.id,this.getNodeURI=e=>`node:${e}`}init(e,t){t.nodeToJSON&&(this.nodeToJSON=t.nodeToJSON(e)),t.getNodeLabelById&&(this.getNodeLabelById=t.getNodeLabelById(e)),t.getNodeLabel&&(this.getNodeLabel=t.getNodeLabel(e)),t.getBlockLabel&&(this.getBlockLabel=t.getBlockLabel(e)),t.getNodeURI&&(this.getNodeURI=t.getNodeURI(e))}getParentName(e){return e?this.getNodeLabelById(e):"root"}};U=X([(0,r.b2)()],U);var Z=class{setSource(e){this.historyService.context.source=e}registerOperationMetas(e){e.forEach(e=>{this.operationRegistry.registerOperationMeta(e)})}transact(e){this.historyService.transact(e)}async undo(){await this.historyService.undo()}async redo(){await this.historyService.redo()}canRedo(){return this.historyService.canRedo()}canUndo(){return this.historyService.canUndo()}pushHistoryOperation(e){return this.historyService.pushOperation(e)}getHistoryOperations(){return this.historyService.getHistoryOperations()}addFromNode(e,t){let n={fromId:"string"==typeof e?e:e.id,data:t};return this.historyService.pushOperation({type:l.C8.addFromNode,value:n,uri:this.config.getNodeURI(t.id)})}deleteNode(e){let{originParent:t,parent:n}=e,o=this.config.getNodeURI(e.id),i=this.config.nodeToJSON(e);if(!i&&(i={id:e.id,type:e.flowNodeType}),n){let r=n.children.findIndex(t=>t===e);if(t){let e=t.id;if(!e){console.warn("no parent found");return}let n={targetId:e,blockData:i};return r>=0&&(n.index=r),this.historyService.pushOperation({type:l.C8.deleteBlock,value:n,uri:o})}{let e={data:i,parentId:n.id};return r>=0&&(e.index=r),this.historyService.pushOperation({type:l.C8.deleteChildNode,value:e,uri:o})}}if(!e.pre){console.warn("no pre found");return}return this.historyService.pushOperation({type:l.C8.deleteFromNode,value:{fromId:e.pre.id,data:i,uri:o}})}addChildNode(e,t,n,o){let i={data:e,parentId:t?.id,originParentId:o?.id,index:n};return this.historyService.pushOperation({type:l.C8.addChildNode,value:i,uri:this.config.getNodeURI(e.id)})}deleteNodes(e){if(0!==e.length)this.historyService.transact(()=>{e.reverse().forEach(e=>{this.deleteNode(e)})})}addFromNodes(e,t){if(0!==t.length)return this.historyService.pushOperation({type:l.C8.addNodes,value:{fromId:e.id,nodes:t.map(e=>this.config.nodeToJSON(e)),uri:this.config.getNodeURI(t[0].id)}})}addBlock(e,t,n,o){let i={targetId:"string"==typeof e?e:e.id,blockData:t,index:o};return n&&(i.parentId=n.id),this.historyService.pushOperation({type:l.C8.addBlock,value:i,uri:this.config.getNodeURI(i.blockData.id)})}changeFormData(e,t){return this.historyService.pushOperation({type:l.C8.changeNode,value:{...t,id:e.id},uri:this.config.getNodeURI(e.id)},{noApply:!0})}moveNode(e,t){return this.fixedHistoryOperationService.dragNodes({dropNode:t,nodes:[e]})}};X([(0,r.f3)(F.qp)],Z.prototype,"historyService",2),X([(0,r.f3)(F.CD)],Z.prototype,"operationRegistry",2),X([(0,r.f3)(l.VO)],Z.prototype,"fixedHistoryOperationService",2),X([(0,r.f3)(l.pQ)],Z.prototype,"document",2),X([(0,r.f3)(U)],Z.prototype,"config",2),Z=X([(0,r.b2)()],Z);var j=class extends l.D9{apply(e){return this.historyService.pushOperation(e)}originApply(e){return super.apply(e)}transact(e){this.historyService.transact(e)}};X([(0,r.f3)(F.qp)],j.prototype,"historyService",2),j=X([(0,r.b2)()],j);var Y=class{constructor(){this._cache=new Map,this._formValueChangeByHistoryEmitter=new s.Q5,this.onFormValueChangeByHistory=this._formValueChangeByHistoryEmitter.event}resetCache(e,t){Object.keys(t).forEach(n=>{this.setCache(e,n,t[n])})}setCache(e,t,n){!this._cache.has(e)&&this._cache.set(e,new Map),this._cache.get(e).set(t,(0,H.cloneDeep)(n))}getCache(e,t){if(!!this._cache.has(e))return this._cache.get(e).get(t)}getFormDataByNodeId(e){let t=this.document.getNode(e);if(!!t)return t.getData(V.Ps)}getFormItemValue(e,t){let n=this.getFormItem(e,t);if(!!n)return n.value}setFormItemValue(e,t,n){let o=this.getFormItem(e,t);o&&(o.value=n,this._formValueChangeByHistoryEmitter.fire({formData:e,path:t,value:n}))}getFormItem(e,t){if(void 0!==t)return t.endsWith("/")&&(t=t.slice(0,-1)),!t.startsWith("/")&&(t="/"+t),e.getFormModel().getFormItemByPath(t)}dispose(){this._formValueChangeByHistoryEmitter.dispose(),this._cache.clear()}};X([(0,r.f3)(l.pQ)],Y.prototype,"document",2),Y=X([(0,r.b2)()],Y);var J={apply:(e,t)=>t.get(l.VO).originApply(e)},W={...J,type:l.C8.addFromNode,inverse:e=>({...e,type:l.C8.deleteFromNode}),getLabel:(e,t)=>{let n=t.get(U),{value:o}=e;return`Create ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(U),{value:o}=e,i=n.getNodeLabel(o.data),r=n.getNodeLabelById(o.fromId);return`Create ${o.data.type} node ${i} after ${r}`}},q={...J,type:l.C8.ungroup,inverse:e=>({...e,type:l.C8.createGroup}),getLabel:(e,t)=>{let n=e.value;return`Ungroup ${n.groupId}`},getDescription:(e,t)=>{let n=e.value;return`Ungroup with nodes ${n.nodeIds.join(", ")}`}},Q={...J,type:l.C8.moveNodes,inverse:e=>({...e,value:{...e.value,fromId:e.value.toId,toId:e.value.fromId}}),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`${o.nodeIds.map(e=>`Move ${n.getNodeLabelById(e)}`).join(";")}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value;return`${o.nodeIds.map(e=>`Move ${n.getNodeLabelById(e)} to ${n.getNodeLabelById(o.toId)}`).join(";")}`},getURI:(e,t)=>{let n=t.get(U),o=e.value.nodeIds;if(0!==o.length)return n.getNodeURI(o[0])}},ee={...J,type:l.C8.moveChildNodes,inverse:e=>({...e,value:{...e.value,fromIndex:e.value.toIndex,toIndex:e.value.fromIndex,fromParentId:e.value.toParentId,toParentId:e.value.fromParentId}}),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`Move ${o.nodeIds.map(e=>n.getNodeLabelById(e)).join(",")}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=void 0!==o.toIndex?`position ${o.toIndex}`:"the end";return`Move nodes ${o.nodeIds.map(e=>n.getNodeLabelById(e)).join(",")} to ${i}`}},et={...J,type:l.C8.moveBlock,inverse:e=>({...e,value:{...e.value,fromIndex:e.value.toIndex,toIndex:e.value.fromIndex,fromParentId:e.value.toParentId,toParentId:e.value.fromParentId}}),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`Move ${n.getNodeLabelById(o.nodeId)}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=void 0!==o.toIndex?`position ${o.toIndex}`:"the end";return`Move branch ${n.getNodeLabelById(o.nodeId)} to ${i}`}},en={...J,type:l.C8.deleteNodes,inverse:e=>({...e,type:l.C8.addNodes}),getLabel:(e,t)=>{let n=t.get(U);return e.value.nodes.map(e=>`Delete ${n.getNodeLabel(e)}`).join(";")},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=n.getNodeLabelById(o.fromId);return o.nodes.map(e=>`Delete ${e.type} node ${n.getNodeLabel(e)} after ${i}`).join(";")},shouldMerge:(e,t,n)=>!!t&&(!!(Date.now()-n.getTimestamp()<500)||!1)},eo={...J,type:l.C8.deleteNode,inverse:e=>({...e,type:l.C8.addNode}),apply:({value:{data:e}},t)=>t.get(l.VO).deleteNode(e.id),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`Create ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=n.getNodeLabel(o.data),r=n.getParentName(o.parentId),a=void 0!==o.index?`position ${o.index}`:"the end";return`Delete ${o.data.type} node ${i} in ${r} at ${a}`}},ei={...J,type:l.C8.deleteFromNode,inverse:e=>({...e,type:l.C8.addFromNode}),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`Delete ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=n.getNodeLabel(o.data),r=n.getNodeLabelById(o.fromId);return`Delete ${o.data.type} node ${i} after ${r}`}},er={...J,type:l.C8.deleteChildNode,inverse:e=>({...e,type:l.C8.addChildNode}),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`Delete ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=n.getNodeLabel(o.data),r=n.getParentName(o.parentId),a=void 0!==o.index?`position ${o.index}`:"the end";return`Delete ${o.data.type} node ${i} in ${r} at ${a}`}},ea={...J,type:l.C8.deleteBlock,inverse:e=>({...e,type:l.C8.addBlock}),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`Delete ${n.getBlockLabel(o.blockData)}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=n.getBlockLabel(o.blockData),r=n.getNodeLabelById(o.targetId),a=void 0!==o.index?`position ${o.index}`:"the end";return`Delete branch ${i} in ${r} at ${a}`}},el={...J,type:l.C8.createGroup,inverse:e=>({...e,type:l.C8.ungroup}),getLabel:(e,t)=>{let n=e.value;return`Create group ${n.groupId} from ${n.targetId}`},getDescription:(e,t)=>{let n=e.value;return`Create group with nodes ${n.nodeIds.join(", ")}`}},ed={...J,type:l.C8.changeNode,inverse:e=>({...e,value:{...e.value,value:e.value.oldValue,oldValue:e.value.value}}),apply:(e,t)=>{let n=t.get(Y),o=n.getFormDataByNodeId(e.value.id);if(!!o)n.setFormItemValue(o,e.value.path,e.value.value)},shouldMerge:(e,t)=>!!(t&&t?.value?.path===e.value?.path&&t?.type===l.C8.changeNode&&["string","number"].includes(typeof e.value.value))&&{type:l.C8.changeNode,value:{...e.value,oldValue:t.value.oldValue,value:e.value.value}},getLabel:e=>{let t=e.value;return`\u5C06\u8282\u70B9${t.id}\u7684${t.path.split("/").filter(Boolean).join(".")}\u5C5E\u6027\u4FEE\u6539\u4E3A${t.value}`}},es={...J,type:l.C8.addNodes,inverse:e=>({...e,type:l.C8.deleteNodes}),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`${o.nodes.map(e=>`Create ${n.getNodeLabel(e)}`).join(";")}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=n.getNodeLabelById(o.fromId);return`${o.nodes.map(e=>`Create ${e.type} node ${n.getNodeLabel(e)} after ${i}`).join(";")}`}},eu={type:l.C8.addNode,inverse:e=>({...e,type:l.C8.deleteNode}),apply:({value:{data:e,parentId:t,index:n,hidden:o}},i)=>i.get(l.VO).addNode(e,{parent:t,index:n,hidden:o}),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`Create ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=n.getNodeLabel(o.data),r=n.getParentName(o.parentId),a=void 0!==o.index?`position ${o.index}`:"the end";return`Create ${o.data.type} node ${i} in ${r} at ${a}`}},ep={...J,type:l.C8.addChildNode,inverse:e=>({...e,type:l.C8.deleteChildNode}),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`Create ${n.getNodeLabel(o.data)}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=n.getNodeLabel(o.data),r=n.getParentName(o.parentId),a=void 0!==o.index?`position ${o.index}`:"the end";return`Create ${o.data.type} node ${i} in ${r} at ${a}`}},ec=[ei,W,{...J,type:l.C8.addBlock,inverse:e=>({...e,type:l.C8.deleteBlock}),getLabel:(e,t)=>{let n=t.get(U),o=e.value;return`Create ${n.getBlockLabel(o.blockData)}`},getDescription:(e,t)=>{let n=t.get(U),o=e.value,i=n.getBlockLabel(o.blockData),r=n.getNodeLabelById(o.targetId),a=void 0!==o.index?`position ${o.index}`:"the end";return`Create branch ${i} in ${r} at ${a}`}},ea,el,q,Q,en,es,ed,et,ep,er,ee,eu,eo],eg=class{registerOperationMeta(e){ec.forEach(t=>{e.registerOperationMeta(t)})}};eg=X([(0,r.b2)()],eg);var eh=(0,d.M1)({onBind:({bind:e,rebind:t})=>{var n,o;n=e,o=t,(0,s.KV)(n,eg,[F.FU]),n(Z).toSelf().inSingletonScope(),n(Y).toSelf().inSingletonScope(),n(U).toSelf().inSingletonScope(),o(l.VO).to(j).inSingletonScope()},onInit(e,t){let n=e.get(Z),o=e.get(Y);n.setSource(e);let i=e.get(l.pQ);if(t?.uri&&(n.historyService.context.uri=t.uri),t?.getDocumentJSON?n.historyService.config.getSnapshot=t.getDocumentJSON(e):n.historyService.config.getSnapshot=()=>i.toJSON(),n.config.init(e,t),t?.operationMetas&&n.registerOperationMetas(t.operationMetas),t.onApply&&e.get(F.f9).onApply(t.onApply.bind(null,e)),!!t?.enableChangeNode)i.onNodeCreate(({node:e,data:t})=>{let i=e.getData(V.Ps);o.setCache(i,"/",t.data),i.formModel.onInitialized(()=>{i.onDetailChange(t=>{let{path:r,initialized:a}=t;"/"!==r&&r.split("/").filter(Boolean)[0];let l=o.getFormItemValue(i,r),d=o.getCache(i,r);if(!(0,H.isEqual)(l,d))a&&n.changeFormData(e,{path:r,value:l,oldValue:d}),o.setCache(i,r,l)})})})},containerModules:[F.Xn]}),ey=n("474414"),ef=Object.defineProperty,em=Object.getOwnPropertyDescriptor,eC=(e,t,n,o)=>{for(var i=o>1?void 0:o?em(t,n):t,r,a=e.length-1;a>=0;a--)(r=e[a])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&ef(t,n,i),i};(o||(o={})).DEFAULT=i.nYJ.DEFAULT;var eN=Symbol("FlowOperationService"),eL=class extends i.D9C{createGroup(e){return this.groupService.createGroup(e)}ungroup(e){return this.groupService.ungroup(e)}setFormValue(e,t,n){let o=this.toNodeEntity(e),r=o?.getData(i.Psq)?.getFormModel();if(!!r)if((0,i.THq)(r))r.setValueIn(t,n);else{let e=r.getFormItemByPath(t);if(!e)return;e.value=n}}startTransaction(){}endTransaction(){}};eC([(0,r.f3)(i.QUv)],eL.prototype,"groupService",2),eL=eC([(0,r.b2)()],eL);var eI=class extends eL{init(){this.toDispose.push(this.onNodeAdd(this.handleNodeAdd.bind(this)))}addFromNode(e,t){return this.fixedHistoryService.addFromNode(e,t)}addBlock(e,t,n={}){let{parent:o,index:i}=n;return this.fixedHistoryService.addBlock(e,t,o,i)}deleteNode(e){let t=this.toNodeEntity(e);if(!!t)this.fixedHistoryService.deleteNode(t)}deleteNodes(e){let t=e.map(e=>"string"==typeof e?this.document.getNode(e):e);return this.fixedHistoryService.deleteNodes(t)}startTransaction(){this.historyService.startTransaction()}endTransaction(){this.historyService.endTransaction()}apply(e){this.historyService.pushOperation(e)}doMoveNode(e,t,n){if(!e.parent?.id)return;let o={nodeIds:[this.toId(e)],fromParentId:e.parent.id,toParentId:this.toId(t),fromIndex:this.getNodeIndex(e),toIndex:n};return this.historyService.pushOperation({type:i.C8.moveChildNodes,value:o})}handleNodeAdd({data:e}){let{parent:t,index:n,hidden:o,originParent:r,...a}=e,l={data:a,parentId:t?.id,index:n,hidden:o};return this.historyService.pushOperation({type:i.C8.addNode,value:l,uri:this.fixedHistoryService.config.getNodeURI(a.id)},{noApply:!0})}};eC([(0,r.f3)(Z)],eI.prototype,"fixedHistoryService",2),eC([(0,r.f3)(F.qp)],eI.prototype,"historyService",2),eC([(0,r.f3)(i.pQ4)],eI.prototype,"document",2),eC([(0,r.zY)()],eI.prototype,"init",1),eI=eC([(0,r.b2)()],eI);var eE=(0,d.M1)({onBind:({bind:e},t)=>{e(eN).to(t?.history?.enable?eI:eL).inSingletonScope()},onDispose:e=>{e.container.get(eN).dispose()}}),eb=(0,R.forwardRef)(function(e,t){let{parentContainer:n,children:r,...a}=e,l=(0,R.useMemo)(()=>{var e;return e=a,t=>{let n=[eE(e={...o.DEFAULT,...e})];return n.push((0,i.cL)({registerShortcuts(n){let o=t.get(i.z2R);if(n.addHandlers({commandId:i.mYg.Default.DELETE,shortcuts:["backspace","delete"],isEnabled:()=>o.selection.length>0&&!t.playground.config.readonlyOrDisabled,execute:()=>{let e=o.selection.filter(e=>e instanceof i.GAy);t.get(eN).deleteNodes(e),o.selection=o.selection.filter(e=>!e.disposed)}}),e?.history?.enable){let o=t.get(Z);!e.history.disableShortcuts&&(n.addHandlers({commandId:i.mYg.Default.UNDO,shortcuts:["meta z","ctrl z"],isEnabled:()=>!0,execute:()=>{o.undo()}}),n.addHandlers({commandId:i.mYg.Default.REDO,shortcuts:["meta shift z","ctrl shift z"],isEnabled:()=>!0,execute:()=>{o.redo()}}))}}}),(0,G.Y)({canSelect:e=>0===e.button&&!t.get(i.pQ4).renderState.config.nodeHoveredId,...e.selectBox||{}}),M(e.dragdrop||{})),n=(0,i.Fu1)(e,n)(t),e.variableEngine?.enable&&n.push((0,i.Ys9)({...e.variableEngine,layout:"fixed"})),e.history?.enable&&n.push(eh(e.history)),n.push((0,i.d3V)({containerModules:[$],onBind(t){!t.isBound(i.h3M)&&t.bind(i.h3M).toConstantValue({...i.XsM,defaultLayout:e.defaultLayout,toNodeJSON:e.toNodeJSON,fromNodeJSON:e.fromNodeJSON,allNodesDefaultExpanded:e.allNodesDefaultExpanded})},onInit:t=>{t.playground.registerLayers(i.Emw,i.V7e),!e.scroll?.disableScrollLimit&&t.playground.registerLayer(i.qq0),!e.scroll?.disableScrollBar&&t.playground.registerLayer(i.lVg),e.nodeRegistries&&t.document.registerFlowNodes(...e.nodeRegistries)}})),n}},[]),d=(0,R.useCallback)(e=>({...(0,i.FwO)(e),get document(){return e.get(i.pQ4)},get operation(){return e.get(eN)},get clipboard(){return e.get(i.YvH)},get selection(){return e.get(i.z2R)},get history(){return e.get(F.qp)}}),[]);return R.createElement(i.W6u,{ref:t,plugins:l,customPluginContext:d,parentContainer:n},r)});function ev(e){let t=e||(0,R.useContext)(i.rQR),n=t.getData(i.LzJ),{expanded:o,dragging:r,activated:a}=n,{startDrag:l}=w(),d=(0,i.Dcz)(),s=t.flowNodeType===i.SyX.BLOCK_ORDER_ICON,u=t.flowNodeType===i.SyX.BLOCK_ICON,p=s||u?t.parent:t,c=(0,i.G2Z)(eN),g=(0,R.useCallback)(()=>{c.deleteNode(p)},[p,c]),h=(0,R.useCallback)(e=>{l(e,{dragStartEntity:t},{dragOffsetX:30,dragOffsetY:30})},[t,l]),y=(0,R.useCallback)(e=>{n.toggleMouseEnter()},[n]),f=(0,R.useCallback)(e=>{n.toggleMouseLeave()},[n]),m=(0,R.useCallback)(()=>{n.toggleExpand()},[n]),C=(0,R.useCallback)(()=>p.getExtInfo(),[p]),N=(0,R.useCallback)(e=>{p.updateExtInfo(e)},[p]),L=(0,R.useMemo)(()=>(0,i.CMu)(p),[p]),I=(0,ey.Re)(L?.state);(0,R.useEffect)(()=>{let e;return(u||s)&&(e=t.parent.onExtInfoChange(()=>t.renderData.fireChange())),()=>e?.dispose()},[t,u,s]);let E=d.config.readonly;return(0,R.useMemo)(()=>({node:p,isBlockOrderIcon:s,isBlockIcon:u,activated:a,readonly:E,expanded:o,dragging:r,startDrag:h,deleteNode:g,onMouseEnter:y,onMouseLeave:f,getExtInfo:C,updateExtInfo:N,toggleExpand:m,get form(){if(!L)return;return{...L,get values(){return L.values},get state(){return I}}}}),[p,s,u,a,E,o,r,h,g,y,f,C,N,m,L,I])}(0,R.forwardRef)(function(e,t){let{children:n,...o}=e;return R.createElement(eb,{ref:t,...o},R.createElement(i.R6T,null,n))});var ex=(e,t,n)=>{let{maxZoom:o,minZoom:r,padding:a,easing:l=!0,easingDuration:d=50}=n,u=s.Ae.enlarge(e.getAllNodes().map(e=>e.getData(i.VOn).bounds)).pad(a,a),p=t.getViewport(!1),c=s.rM.fixSize(u,p);return c>o?c=o:c<r&&(c=r),t.scrollToView({bounds:u,zoom:c,easing:l,scrollToCenter:!0,easingDuration:d})};function eP(e){let{maxZoom:t=2,minZoom:n=.25,padding:o=30}=e||{},r=(0,i.Dcz)(),a=(0,i.KUq)(),l=a.isBound(F.qp)?a.get(F.qp):void 0,d=(0,i.G2Z)(i.pQ4),[u,p]=(0,R.useState)(1),[c,g]=(0,R.useState)(d.layout),[h,y]=(0,R.useState)(!1),[f,m]=(0,R.useState)(!1),C={maxZoom:t,minZoom:n,padding:o},N=(0,R.useCallback)(e=>{let t=d.getAllNodes();e=e||(d.layout.name===i.XPE.HORIZONTAL_FIXED_LAYOUT?i.XPE.VERTICAL_FIXED_LAYOUT:i.XPE.HORIZONTAL_FIXED_LAYOUT),t.map(e=>{e.getData(i.LzJ).node.classList.add("gedit-transition-ease")}),setTimeout(()=>{ex(d,r.config,{...C,easingDuration:300})},10),setTimeout(()=>{t.map(e=>{e.getData(i.LzJ).node.classList.remove("gedit-transition-ease")})},500),d.setLayout(e),g(d.layout)},[d,r]),L=(0,R.useCallback)(e=>{if(!(u<n))r?.config.zoomout(e)},[u,r]),I=(0,R.useCallback)(e=>{if(!(u>t))r?.config.zoomin(e)},[u,r]),E=(0,R.useCallback)((e,t)=>{ex(d,r.config,{...C,easing:e,easingDuration:t})},[d,r]),b=(0,R.useCallback)((e,t,n)=>{r.config.updateZoom(e,t,n)},[r]),v=(0,R.useCallback)(()=>l?.undo(),[l]),x=(0,R.useCallback)(()=>l?.redo(),[l]);return(0,R.useEffect)(()=>{let e=new s.K4;return r&&e.push(r.onZoom(e=>p(e))),l&&e.push(l.undoRedoService.onChange(()=>{y(l.canUndo()),m(l.canRedo())})),()=>e.dispose()},[r,l]),{zoomin:I,zoomout:L,fitView:E,updateZoom:b,zoom:u,isVertical:c.name===i.XPE.VERTICAL_FIXED_LAYOUT,changeLayout:N,canRedo:f,canUndo:h,undo:v,redo:x}}function eS(){return(0,i.G2Z)(i.Zn3)}},179702:function(e,t,n){n.d(t,{p:function(){return T}});var o=n(769379),i=n(908600),r=n(770656),a=n(325458),l=n(362270),d=n(433210),s=n(117628),u=n(835188),p=n(963636);function c(){return i.createElement("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("circle",{id:"Ellipse 465",cx:"4",cy:"4",r:"3",fill:"white",stroke:"#3370FF",strokeWidth:"2"}))}function g(e){return i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 48 48",...e},i.createElement("g",{fill:"none"},i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M22 8.01176C20.5 8.01193 16.0714 7.93811 15 13.0005C13.917 18.1177 9.85714 22.8477 8 24"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M22 40C20.5 40.0003 16.0714 40.0628 15 35.0005C13.917 29.8833 9.85714 25.1522 8 23.9999"}),i.createElement("circle",{cx:"8",cy:"24",r:"4",fill:"currentColor"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M8 24L22 24"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M30 24.001H42"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M30 8.00098H42"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M30 40.001H42"})))}function h({color:e,circleColor:t}){return i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("circle",{cx:"8",cy:"8",r:"7",fill:t}),i.createElement("path",{fill:e,d:"M10.8281 9.4715C11.0883 9.21131 11.0885 8.78909 10.8291 8.52804C10.6413 8.33892 10.4536 8.14952 10.266 7.9601C9.66706 7.35551 9.06799 6.75079 8.46068 6.15496C8.20439 5.90352 7.7947 5.90352 7.53841 6.15496C6.93103 6.75085 6.33191 7.35564 5.73291 7.96029C5.5454 8.14957 5.3579 8.33884 5.17017 8.52782C4.91075 8.78895 4.91096 9.21099 5.17124 9.47127C5.43152 9.73155 5.85355 9.73176 6.11383 9.47148L7.99955 7.58576L9.88548 9.4717C10.1457 9.73189 10.5679 9.73169 10.8281 9.4715Z"}),i.createElement("path",{fill:e,d:"M0.888672 7.99997C0.888672 4.07261 4.07242 0.888855 7.99978 0.888855C11.9271 0.888855 15.1109 4.07261 15.1109 7.99997C15.1109 11.9273 11.9271 15.1111 7.99978 15.1111C4.07242 15.1111 0.888672 11.9273 0.888672 7.99997ZM13.818 7.99997C13.818 4.78667 11.2131 2.18178 7.99978 2.18178C4.78649 2.18178 2.1816 4.78667 2.1816 7.99997C2.1816 11.2133 4.78649 13.8181 7.99978 13.8181C11.2131 13.8181 13.818 11.2133 13.818 7.99997Z"}))}var y=a.ZP.div`
  width: 16px;
  height: 16px;
  border-radius: 100px;
  background-color: white;
  border: 1px dashed #b8bcc1;
`,f="hsl(252 62% 54.9%)",m="hsl(252deg 62% 55% / 9%)",C=a.ZP.div`
  position: relative;
  height: 32px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  cursor: pointer;
  font-size: 19px;
  border: 1px solid ${f};
  padding: 0 15px;
  &:hover: {
    background-color: ${m};
    color: ${f};
  }
`,N=a.ZP.div`
  position: absolute;
  top: -8px;
  right: -8px;
  text-align: center;
  line-height: 16px;
  width: 16px;
  height: 16px;
  border-radius: 8px;
  font-size: 12px;
  color: #fff;
  background-color: ${f};
`,L=a.ZP.div`
  display: flex;
  align-items: center;
`,I=(e,t)=>a.ZP.div`
    width: ${e}px;
    height: ${t}px;
    background: #3370ff;
  `,E=(e,t)=>!e||e<0?0:!t||t<0?e:(0,l.min)([e,t])||0,b=a.ZP.div`
  width: 16px;
  height: 16px;
  font-size: 10px;
  border-radius: 9px;
  display: flex;
  color: #fff;
  cursor: pointer;
  justify-content: center;
  align-items: center;
  background: ${e=>e.hoverActivated?"#82A7FC":"#BBBFC4"};
  transform: ${e=>!e.isVertical&&e.isCollapse?"rotate(-90deg)":""};
`,v=a.ZP.div`
  width: 28px;
  height: 18px;
  background: ${e=>e.activated?"#82A7FC":"rgb(187, 191, 196)"};
  display: flex;
  border-radius: 9px;
  justify-content: space-evenly;
  align-items: center;
  color: #fff;
  font-size: 10px;
  font-weight: bold;
  transform: ${e=>e.isVertical?"":"rotate(90deg)"};
  div {
    display: flex;
    justify-content: center;
    align-items: center;
    svg {
      width: 12px;
      height: 12px;
    }
  }
`,x={nodes:[{type:"start",label:"Start",icon:i.createElement(function(e){return i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e},i.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"1.5",strokeWidth:"1.499"},i.createElement("path",{strokeDasharray:"2 2",d:"M16 2H8a6 6 0 0 0-6 6v8a6 6 0 0 0 6 6h8a6 6 0 0 0 6-6V8a6 6 0 0 0-6-6Z"}),i.createElement("path",{d:"M16 5H8a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3Z"})))},null)},{type:"dynamicSplit",label:"Split Branch",icon:i.createElement(g,null),blocks:()=>[{id:(0,d.x0)(5)},{id:(0,d.x0)(5)}]},{type:"end",label:"Branch End",icon:i.createElement(function(e){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em",viewBox:"0 0 24 24",...e},i.createElement("path",{fill:"#888888",fillRule:"evenodd",d:"M11 13v-2H6.286C5.023 11 4 10.105 4 9s1.023-2 2.286-2H11V3a1 1 0 0 1 2 0v4h4.714C18.977 7 20 7.895 20 9s-1.023 2-2.286 2H13v2h3a2 2 0 1 1 0 4h-3v4a1 1 0 0 1-2 0v-4H8a2 2 0 1 1 0-4h3Z"}))},null),branchEnd:!0},{type:"loop",schemaType:"loop",label:"Loop",icon:i.createElement(function(e){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"1em",height:"1em",viewBox:"0 0 16 16",...e},i.createElement("g",{fill:"currentColor"},i.createElement("path",{d:"M1.161 8a6.84 6.84 0 1 0 6.842-6.84a.58.58 0 1 1 0-1.16a8 8 0 1 1-6.556 3.412l-.663-.577a.58.58 0 0 1 .227-.997l2.52-.69a.58.58 0 0 1 .728.633l-.332 2.592a.58.58 0 0 1-.956.364l-.643-.56A6.812 6.812 0 0 0 1.16 8z"}),i.createElement("path",{d:"M6.641 11.671V8.843h1.57l1.498 2.828h1.314L9.377 8.665c.897-.3 1.427-1.106 1.427-2.1c0-1.37-.943-2.246-2.456-2.246H5.5v7.352h1.141zm0-3.75V5.277h1.57c.881 0 1.416.499 1.416 1.32c0 .84-.504 1.324-1.386 1.324h-1.6z"})))},null)},{type:"tryCatch",schemaType:"tryCatch",label:"TryCatch",icon:i.createElement(g,null),blocks:()=>[{id:`try_${(0,d.x0)(5)}`},{id:`catch_${(0,d.x0)(5)}`},{id:`catch_${(0,d.x0)(5)}`}]},{type:"noop",label:"Noop Node",icon:i.createElement(function(e){return i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",...e},i.createElement("path",{fill:"currentColor",d:"M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773C16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593c.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318C1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"}))},null)},{type:"end",label:"End",icon:i.createElement(function(e){return i.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 256 256",...e},i.createElement("path",{fill:"currentColor",d:"M128 236a108 108 0 1 1 108-108a108.1 108.1 0 0 1-108 108Zm0-192a84 84 0 1 0 84 84a84.1 84.1 0 0 0-84-84Z"}))},null)}],find:function(e){return x.nodes.find(t=>t.type===e)}},P=a.ZP.div`
  width: 100%;
  height: 32px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  cursor: pointer;
  font-size: 19px;
  padding: 0 15px;
  &:hover: {
    background-color: ${m};
    color: ${f};
  },
`,S=a.ZP.div`
  font-size: 12px;
  margin-left: 10px;
`,D=a.ZP.div`
  max-height: 500px;
  overflow: auto;
  &::-webkit-scrollbar {
    display: none;
  }
`;function _(e){return i.createElement(P,{onClick:e.onClick},i.createElement("div",{style:{fontSize:14}},e.icon),i.createElement(S,null,e.label))}var O=x.nodes.filter(e=>"start"!==e.type);function B(e){return i.createElement(D,{style:{width:180}},O.map((t,n)=>i.createElement(_,{key:n,icon:t.icon,label:t.label,onClick:()=>e.onSelect?.(t)})))}var A=a.ZP.div`
  width: ${e=>e.hovered?15:6}px;
  height: ${e=>e.hovered?15:6}px;
  background-color: rgb(143, 149, 158);
  color: #fff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
`,k=(0,a.ZP)(p.Z)`
  color: #3370ff;
  background-color: #fff;
  border-radius: 15px;
`,T={[o.kDE.ADDER]:function(e){let{from:t}=e,[n,r]=(0,i.useState)(!1),a=(0,o.Dcz)(),l=(0,o.G2Z)(o.Vro);return a.config.readonlyOrDisabled?null:i.createElement(u.J2,{visible:n,onVisibleChange:r,content:i.createElement(B,{onSelect:e=>{let n=l.addFromNode(t,{id:e.type+(0,d.x0)(5),type:e.type,blocks:e.blocks?e.blocks():void 0});setTimeout(()=>{a.scrollToView({bounds:n.getData(o.eGM).bounds,scrollToCenter:!0})},10)}}),placement:"right",trigger:"click",overlayStyle:{padding:0}},i.createElement(A,{hovered:e.hoverActivated,onMouseDown:e=>e.stopPropagation(),onClick:()=>{r(!0)}},e.hoverActivated?i.createElement(k,null):null))},[o.kDE.COLLAPSE]:function(e){let{collapseNode:t,activateNode:n,hoverActivated:r}=e,a=n?.getData(o.LzJ),l=t.getData(o.eGM);if(!l)return i.createElement(i.Fragment,null);let d=()=>{setTimeout(()=>{o.XQj.getLatest()?.scrollToView({position:n?.getData(o.eGM)?.outputPoint,scrollToCenter:!0})},100)};if(l.collapsed){let e=t.allCollapsedChildren.filter(e=>!e.hidden&&e!==n).length;return i.createElement(b,{onClick:()=>{l.collapsed=!1,d()},hoverActivated:r,"aria-hidden":"true"},e)}let s=r?"#82A7FC":"#BBBFC4";return i.createElement(b,{onClick:()=>{l.collapsed=!0,a?.toggleMouseLeave(),d()},hoverActivated:r,isVertical:n?.isVertical,isCollapse:!0,"aria-hidden":"true"},i.createElement(h,{color:s,circleColor:"var(--semi-color-white)"}))},[o.kDE.TRY_CATCH_COLLAPSE]:function(e){let{node:t}=e,n=t.getData(o.LzJ),a=t.getData(o.eGM),[l,d]=(0,i.useState)(!1);if(!a||!a.parent)return i.createElement(i.Fragment,null);let s=a.inputPoint.x-a.parent.inputPoint.x,u=()=>{setTimeout(()=>{o.XQj.getLatest()?.scrollToView({position:t?.getData(o.eGM)?.inputPoint,scrollToCenter:!0})},100)},p=()=>{a.collapsed=!0,n.activated=!1,u()},c=()=>{a.collapsed=!1,u()};return i.createElement("div",{onMouseEnter:()=>{d(!0),n.activated=!0},onMouseLeave:()=>{d(!1),n.activated=!1},style:{width:s,height:40,display:"flex",alignItems:"center",justifyContent:"center",gap:6}},i.createElement("div",{style:{fontSize:12,color:"#8F959E",textAlign:"center",whiteSpace:"nowrap",backgroundColor:"var(--g-editor-background)",lineHeight:"20px"}},"Something error"),(()=>{if(a.collapsed){let e=t.allCollapsedChildren.filter(e=>!e.hidden&&e!==t).length;return i.createElement("div",{onClick:c,style:{width:16,height:16,fontSize:10,borderRadius:9,display:"flex",color:"#fff",cursor:"pointer",justifyContent:"center",alignItems:"center",background:l?"#82A7FC":"#BBBFC4"},"aria-hidden":"true"},e)}return l?i.createElement("div",{onClick:p,style:{width:16,height:16,fontSize:10,borderRadius:9,display:"flex",color:"#fff",cursor:"pointer",justifyContent:"center",alignItems:"center",background:"#82A7FC"},"aria-hidden":"true"},i.createElement(r.Z,null)):i.createElement(i.Fragment,null)})())},[o.kDE.BRANCH_ADDER]:function(e){let{activated:t,node:n}=e,r=n.firstChild?.getData(o.LzJ),a=(0,o.Dcz)(),l=(0,o.G2Z)(o.Vro),{isVertical:u}=n;return a.config.readonlyOrDisabled?null:i.createElement(v,{isVertical:u,activated:t,onMouseEnter:()=>r?.toggleMouseEnter(),onMouseLeave:()=>r?.toggleMouseLeave()},i.createElement("div",{onClick:()=>{!function(){let e=l.addBlock(n,{id:(0,d.x0)(5)});setTimeout(()=>{a.scrollToView({bounds:e.getData(o.eGM).bounds,scrollToCenter:!0})},10)}()},"aria-hidden":"true",style:{flexGrow:1,textAlign:"center"}},i.createElement(s.Z,null)))},[o.kDE.DRAG_NODE]:function(e){let{dragStart:t,dragNodes:n}=e,o=(n||[]).map(e=>e.allCollapsedChildren.length?e.allCollapsedChildren.filter(e=>!e.hidden).length:1).reduce((e,t)=>e+t,0);return i.createElement(C,null,t?.id,o>1&&i.createElement(i.Fragment,null,i.createElement(N,null,o),i.createElement(C,{style:{position:"absolute",top:5,right:-5,left:5,bottom:-5,opacity:.5}})))},[o.kDE.DRAGGABLE_ADDER]:function(){return i.createElement(y,null)},[o.kDE.DRAG_HIGHLIGHT_ADDER]:function({node:e}){let t=e.getData(o.eGM)?.bounds,{isVertical:n}=e;if(n){let n=(t?.width||0)-16,r=e?.next?.getData(o.eGM)?.bounds?.width,a=I(E(n,(r||0)-16),2);return i.createElement(L,null,i.createElement(c,null),i.createElement(a,null),i.createElement(c,null))}let r=(t?.height||0)-16,a=e?.next?.getData(o.eGM)?.bounds?.height,l=I(2,E(r,(a||0)-16));return i.createElement(L,{style:{flexDirection:"column"}},i.createElement(c,null),i.createElement(l,null),i.createElement(c,null))},[o.kDE.DRAG_BRANCH_HIGHLIGHT_ADDER]:c}}}]);